<!doctype html>
<html>
	<head>
		<title>Fypus</title>
 <style>
  #inputForm {
    display: block;
  }
  </style>
</head>

<body>

	<form method="post">
  <h3>
    <font color="#0000ff" face="Arial"><a name="Instructions">Instructions</a>:</font>
  </h3>
  <ol>
    <li>
      <p style="margin-top: 0pt; margin-bottom: 0pt;">
      <font face="Arial">Enter the <font color="#0000ff">number of data
      points</font>: 
      <input name="cPts" value="10" size="4" type="text"> (or, if summary data,
      the number of lines of data). </font>
    </p></li><li>
      <p style="margin-top: 0pt; margin-bottom: 0pt;">
      <font face="Arial">Enter the <font color="#0000ff">number of predictor
      variables</font>: 
      <input name="cVar" value="1" size="2" type="text"> </font>
    </p></li><li>
      <p style="margin-top: 0pt; margin-bottom: 0pt;">
      <font face="Arial">If summary data, check here
      <input name="Grouped" value="1" type="checkbox"> </font>
    </p></li><li>
      <p style="margin-top: 0pt; margin-bottom: 0pt;">
      <font face="Arial">Type or paste data in the <b>Data Window</b> below (see
      lower section on page concerning issues on data formatting)</font>
  </p></li></ol>
  <p style="margin-top: 0pt; margin-bottom: 0pt;">
  <font color="#0000ff" face="Arial Black">Data Window</font>
  </p><p style="margin-top: 0pt; margin-bottom: 0pt;">
  <textarea id ="inputForm" name="data" rows="14" cols="80">1,0
2,0
3,0
4,0
5,1
6,0
7,1
8,0
9,1
10,1
</textarea><br>
  &nbsp;
  </p><ol start="5">
    <li>
      <p style="margin-top: 0pt; margin-bottom: 0pt;">
      <font color="#0000ff" face="Arial">Click the
      <input value="Solve" onclick="Iterate(this.form)" type="button"></font><font color="Red" face="Arial"><font color="#0000ff" face="Arial"> button;</font>
      </font><font face="Arial">results will appear in the <b>Results Window</b>
      below:</font>
  </p></li></ol>
  <p style="margin-top: 0pt; margin-bottom: 0pt;">
  <font color="#0000ff" face="Arial Black"><b>Results Window</b></font>
  </p><p style="margin-top: 0pt; margin-bottom: 0pt;">
  <textarea name="output" rows="11" cols="80"></textarea><br>

</form>
</body>
  	<script src= "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://www.gstatic.com/firebasejs/4.5.2/firebase.js"></script>
	<script src = "fypus-javascript-logisticreg-test.js"></script>
	<script>
	  // Initialize Firebase
		var config = {
		    apiKey: "AIzaSyBB-FnBUDcX58sJUC_3Px-Zg8Wy5Q-qy2c",
		    authDomain: "fypus-b50d0.firebaseapp.com",
		    databaseURL: "https://fypus-b50d0.firebaseio.com",
		    projectId: "fypus-b50d0",
		    storageBucket: "",
			messagingSenderId: "173044464319"
		};
		firebase.initializeApp(config);

		var database = firebase.database();
		console.log(database);

		//read database
		var ref = firebase.database().ref();
		var data;
		ref.on("value", function(snapshot) {
			
			//prepare data to be viable for regression
			data = snapshot.val()["Data"]
			strData = "";

			Object.keys(data).forEach(function(k){
			   	var isFirstInArray = true;
			   	var varCount = 0;
			    Object.keys(data[k]).forEach(function(x){
			    	 if(varCount < 9) {
				    	if(isFirstInArray) {strData+=""+data[k][x]; isFirstInArray = false;}
				    	else {strData+=","+data[k][x];}

				    	varCount++;
			     }
				});
				strData+="\n";
			});

			console.log(strData);
			$( document ).ready(function() {
			    document.getElementById("inputForm").value = strData;
			   // var testData = "";
			    //document.getElementById("inputForm").value = testData;

			});
		}, function (error) {
		   console.log("Error: " + error.code);
		});


		var dataRef = firebase.database().ref("Data/");
		//write data
		// dataRef.push ({
		//       Name: "John",
		//       Age: 35,
		//       Sex: "m"			
		// });
	</script>

</html>